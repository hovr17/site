<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <title>–§–æ—Ç–æ - –•—Ä–∞–º –ò–ª—å–∏ –ü—Ä–æ—Ä–æ–∫–∞</title>
  <link rel="stylesheet" href="common.css">
  <link rel="stylesheet" href="stories.css">
  
  <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –î–û –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ -->
  <script src="stories_data.js"></script>

  <!-- DEBUG: Safari Detector -->
<style>
  #safari-debug-banner {
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%) translateY(-100px);
    background: linear-gradient(135deg, #ff9500, #ff5e3a);
    color: white;
    padding: 15px 25px;
    border-radius: 12px;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-size: 14px;
    font-weight: 600;
    z-index: 999999;
    box-shadow: 0 10px 30px rgba(255, 94, 58, 0.4);
    display: flex;
    align-items: center;
    gap: 12px;
    opacity: 0;
    transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    max-width: 90vw;
    border: 2px solid rgba(255, 255, 255, 0.3);
  }
  
  #safari-debug-banner.show {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
  
  #safari-debug-banner::before {
    content: "üß≠";
    font-size: 20px;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
  }
  
  #safari-debug-info {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }
  
  #safari-debug-title {
    font-size: 16px;
    font-weight: 700;
    text-shadow: 0 1px 2px rgba(0,0,0,0.2);
  }
  
  #safari-debug-details {
    font-size: 12px;
    opacity: 0.95;
    font-weight: 400;
    font-family: monospace;
  }
  
  #safari-debug-close {
    background: rgba(255, 255, 255, 0.25);
    border: none;
    color: white;
    width: 28px;
    height: 28px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    line-height: 1;
    margin-left: 10px;
    transition: all 0.2s;
    backdrop-filter: blur(10px);
  }
  
  #safari-debug-close:hover {
    background: rgba(255, 255, 255, 0.4);
    transform: rotate(90deg);
  }
  
  /* –î–ª—è iOS –¥–æ–±–∞–≤–ª—è–µ–º –æ—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É –ø–æ–¥ —Å—Ç–∞—Ç—É—Å –±–∞—Ä */
  @supports (-webkit-touch-callout: none) {
    #safari-debug-banner {
      top: 50px;
    }
  }
</style>

<script>
(function() {
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ Safari (–∏—Å–∫–ª—é—á–∞–µ–º Chrome, Firefox, Edge –Ω–∞ iOS)
  function isSafari() {
    const ua = navigator.userAgent.toLowerCase();
    const isSafari = /safari/.test(ua) && !/chrome/.test(ua) && !/crios/.test(ua) && !/fxios/.test(ua) && !/edgios/.test(ua) && !/yabrowser/.test(ua);
    return isSafari;
  }
  
  // –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ iOS/macOS
  function getOSVersion() {
    const ua = navigator.userAgent;
    const iOSMatch = ua.match(/OS (\d+)[_\d]* like Mac OS X/);
    const macMatch = ua.match(/Mac OS X (\d+[._\d]*)/);
    
    if (iOSMatch) return 'iOS ' + iOSMatch[1];
    if (macMatch) return 'macOS ' + macMatch[1].replace(/_/g, '.');
    return 'Unknown OS';
  }
  
  if (isSafari()) {
    // –°–æ–∑–¥–∞–µ–º –ø–ª–∞—à–∫—É
    const banner = document.createElement('div');
    banner.id = 'safari-debug-banner';
    
    banner.innerHTML = `
      <div id="safari-debug-info">
        <div id="safari-debug-title">Safari Detected</div>
        <div id="safari-debug-details">${getOSVersion()} ‚Ä¢ ${window.innerWidth}x${window.innerHeight}</div>
      </div>
      <button id="safari-debug-close" onclick="this.parentElement.remove()">√ó</button>
    `;
    
    document.body.appendChild(banner);
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
    setTimeout(() => {
      banner.classList.add('show');
    }, 100);
    
    // –ê–≤—Ç–æ-—Å–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    setTimeout(() => {
      if (banner.parentElement) {
        banner.style.opacity = '0';
        banner.style.transform = 'translateX(-50%) translateY(-100px)';
        setTimeout(() => banner.remove(), 400);
      }
    }, 10000);
    
    // –õ–æ–≥ –≤ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –¥–µ–±–∞–≥–∞
    console.log('%cüß≠ Safari Debug:', 'color: #ff9500; font-weight: bold; font-size: 14px;', {
      userAgent: navigator.userAgent,
      platform: navigator.platform,
      vendor: navigator.vendor,
      screen: `${window.innerWidth}x${window.innerHeight}`,
      devicePixelRatio: window.devicePixelRatio
    });
  }
})();
</script>
</head>
<body>
  <div class="stories-container">
    <!-- –¢–µ–∫—Å—Ç–æ–≤–∞—è –º–µ—Ç–∫–∞ "—Ñ–æ—Ç–æ –æ–±—ä–µ–∫—Ç–∞" -->
    <div class="stories-label" id="storiesLabel"></div>
    
    <!-- –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è (–∫—Ä–µ—Å—Ç–∏–∫) -->
    <button class="close-button" id="closeBtn">
      <img src="ui/cross.svg" alt="–ó–∞–∫—Ä—ã—Ç—å">
    </button>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π -->
    <div class="slides-container" id="slidesContainer">
      <!-- –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∏ –ø–æ–¥–ø–∏—Å–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
    </div>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å—Ç—Ä–µ–ª–∫–∏ -->
    <div class="nav-arrows">
      <button class="nav-arrow prev-arrow hidden" id="prevArrow">
        <img src="ui/back_button.svg" alt="–ü—Ä–µ–¥—ã–¥—É—â–µ–µ">
      </button>
      <button class="nav-arrow next-arrow" id="nextArrow">
        <img src="ui/back_button.svg" alt="–°–ª–µ–¥—É—é—â–µ–µ">
      </button>
    </div>

    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ -->
    <div class="progress-container" id="progressContainer">
      <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
    </div>
  </div>

  <script src="stories.js"></script>
</body>
</html>

