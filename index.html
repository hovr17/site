<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, interactive-widget=resizes-content">
    <title>Путеводитель по Суздалю</title>
    <link rel="stylesheet" href="common.css">
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="footer.css">
</head>
<body>
    <script>
        // Определение браузера и настройка позиционирования (подход из вашего примера)
        (function() {
            const isMobile = window.matchMedia('(max-width: 1080px)').matches || 
                             /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            
            if (!isMobile) return;
            
            document.body.classList.add('is-mobile');
            
            // Проверка Яндекс.Браузера (как в вашем StoriesManager)
            if (/YaBrowser/i.test(navigator.userAgent)) {
                document.body.classList.add('yandex-browser');
            } else {
                document.body.classList.add('other-mobile-browser');
                initDynamicButtonPosition();
            }
            
            function initDynamicButtonPosition() {
                const btn = document.querySelector('.open-btn');
                if (!btn) return;
                
                // Используем Visual Viewport API для точного определения видимой области
                const vv = window.visualViewport;
                
                function updatePosition() {
                    if (!vv) return;
                    
                    // Получаем высоту видимой области (исключая панели инструментов)
                    const visibleHeight = vv.height;
                    const visibleBottom = vv.pageTop + visibleHeight;
                    
                    // Получаем позицию контейнера относительно страницы
                    const container = document.querySelector('.container');
                    const containerRect = container.getBoundingClientRect();
                    const containerTop = containerRect.top + window.scrollY;
                    
                    // Вычисляем позицию кнопки: 5px от низа видимой области
                    // Если контейнер ограничен 100dvh, но видимая область меньше,
                    // кнопка должна быть на 5px от видимого низа
                    const buttonBottomFromContainerBottom = (containerTop + containerRect.height) - visibleBottom + 5;
                    
                    // Применяем позицию (минимум 5px, чтобы не ушла за экран)
                    btn.style.bottom = `${Math.max(5, buttonBottomFromContainerBottom)}px`;
                }
                
                // Обновляем при любом изменении видимой области (скрытие/показ address bar)
                vv.addEventListener('resize', updatePosition);
                vv.addEventListener('scroll', updatePosition);
                window.addEventListener('scroll', updatePosition);
                window.addEventListener('resize', updatePosition);
                
                // Начальная установка после полной загрузки
                if (document.readyState === 'loading') {
                    document.addEventListener('DOMContentLoaded', updatePosition);
                } else {
                    updatePosition();
                }
                
                // Дополнительное обновление после загрузки изображений (чтобы высота контейнера точно определилась)
                window.addEventListener('load', updatePosition);
            }
        })();
    </script>

    <div class="container">
        <img src="ui/sokol.png" class="bird">
        <h1 class="title">путеводитель</h1>
        <h1 class="subtitle">СУЗДАЛЬ</h1>
        <p class="places">
            <span class="places-number">50+</span> <span class="places-text">мест</span>
        </p>
        <a href="categories.html" class="open-btn">ОТКРЫТЬ</a>

        <footer class="footer">
            <div class="footer-content">
                <div class="footer-header">
                    <a href="about.html" class="footer-link">О проекте</a>
                    <img src="ui/sokol.png" class="footer-logo">
                </div>
                
                <div class="footer-separator"></div>
                
                <div class="footer-text-container">
                    <p class="footer-disclaimer">
                        Данный интернет-сайт и его содержимое носит исключительно информационный характер и ни при каких условиях информационные материалы, каталоги, статьи и цены, размещенные на сайте, не является публичной офертой, определяемой положениями Статьи 437 Гражданского кодекса РФ.
                    </p>
                    
                    <p class="footer-copy-info">
                        Использование или копирование фото- и видеоматериалов допускается исключительно с обязательным указанием активной гиперссылки на данный сайт.
                    </p>
                    
                    <p class="footer-copyright">
                        2026©
                    </p>
                </div>
            </div>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>
